{% extends "base.html" %}
{% block title %}My Profile {% endblock %}
{% block extraheaders %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/style_main.css') }}" !important>
{% endblock %}
{% block content %}

<div class="container mt-5">
  <section class="title-section text-center mt-5">
    <h1>My Ongoing Jobs</h1>
    <div class="job-section my-4">
      <table class="table table-striped table-bordered" id="jobsTable">
      <thead>
        <tr>
          <th scope="col">Job Name</th>
          <th scope="col">Pay</th>
          <th scope="col">Location</th>
          <th scope="col">Start From</th>
          <th scope="col">Job Type</th>
          <th scope="col" colspan="2">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for row in posted %}
        <tr>
          <td>{{row[0]}}</td>
          <td>{{row[1]}}</td>
          <td>{{row[2]}}</td>
          <td>{{row[3]}}</td>
          <td>{{row[4]}}</td>
          <td>
            <form class="btn btn-primary view-btn" action="{{ url_for('edit_post', post_id=row[5]) }}" method="post"
              class="btn btn-primary view-btn">
              <input style="color: white; background: transparent; border: transparent;" type="submit" value="Edit">
            </form>
          </td>
          <td>
            <form class="btn btn-primary view-btn" action="{{ url_for('profile')}}" method="post"
              class="btn btn-primary view-btn">
              <input name="post_id" style="display: none;" type="number" value="{{ row[5] }}">
              <input style="color: white; background: transparent; border: transparent;" type="submit" value="Delete">
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
      </table>
      <form class="btn btn2 my-3" action="{{ url_for('post')}}">
        <input style="background: transparent; border: transparent;" type="submit" value="Make a Post" />
      </form>
    </div>
  </section>

  <section class="title-section text-center mt-5">
    <h1> My Applications </h1>
    <div class="hire-me-section my-4">
      <table class="table table-striped table-bordered" id="hireMeTable">
        <thead>
          <tr>
            <th scope="col">Job Name</th>
            <th scope="col">Employer</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for row in applications %}
        <tr>
          <td>{{row[0]}}</td>
          <td>{{row[1]}}</td>
          <td>
            <form class="btn btn-primary view-btn" action="{{ url_for('view_job', job_id=row[2]) }}" method="post"
              class="btn btn-primary view-btn">
              <input style="color: white; background: transparent; border: transparent;" type="submit" value="View">
            </form>
          </td>
        </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
  </section>

  <section class="title-section text-center mt-5">
    <h1> Messages </h1>
    <div class="hire-me-section my-4">
      <table class="table table-striped table-bordered" id="hireMeTable">
        <thead>
          <tr>
            <th scope="col">Job Name</th>
            <th scope="col">Applicant</th>
            <th scope="col">Contact Info</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for row in messages %}
        <tr>
          <td>{{row[0]}}</td>
          <td>{{row[1]}}</td>
          <td>{{row[2]}}</td>
          <td>
            <form class="btn btn-primary view-btn" action="{{ url_for('view_message', message_id=row[3]) }}" method="post"
              class="btn btn-primary view-btn">
              <input style="color: white; background: transparent; border: transparent;" type="submit" value="View">
            </form>
          </td>
        </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
  </section>
</div>
{% endblock %}